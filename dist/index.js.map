{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { h, Component } from 'preact';\n\nclass AsyncRoute extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tcomponentData: null\n\t\t};\n\t}\n\tloadComponent(){\n\t\tconst componentData = this.props.component(this.props.url, ({component}) => {\n            // Named param for making callback future proof\n\t\t\tif (component) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcomponentData: component\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// In case returned value was a promise\n\t\tif (componentData && componentData.then) {\n\t\t\t((url)=>{\n\t\t\t\tcomponentData.then(component => {\n\t\t\t\t\tif (url === this.props.url) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tcomponentData: component\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})(this.props.url);\n\t\t}\n\t}\n\tcomponentDidMount(){\n\t\tthis.loadComponent();\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\t\tif (this.props.url && this.props.url !== nextProps.url) {\n\t\t\tthis.setState({\n\t\t\t\tcomponentData: null\n\t\t\t}, ()=>{\n\t\t\t\tthis.loadComponent();\n\t\t\t});\n\t\t}\n\t}\n\trender(){\n\n\t\tif (this.state.componentData) {\n\t\t\treturn h(this.state.componentData, this.props);\n\t\t} else if (this.props.loading) {\n\t\t\tconst loadingComponent = this.props.loading();\n\t\t\treturn loadingComponent;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default AsyncRoute;"],"names":["AsyncRoute","state","loadComponent","componentData","props","component","url","setState","then","componentDidMount","componentWillReceiveProps","nextProps","render","h","loading","loadingComponent","Component"],"mappings":";;;;;;;;;;;;AAAA,IAEMA;;;uBACS;;;+CACb,qBADa;;QAERC,KAAL,GAAa;kBACG;GADhB;;;;sBAIDC,yCAAe;;;MACRC,gBAAgB,KAAKC,KAAL,CAAWC,SAAX,CAAqB,KAAKD,KAAL,CAAWE,GAAhC,EAAqC,gBAAiB;OAAfD,SAAe,QAAfA,SAAe;;;OAEvEA,SAAJ,EAAe;WACTE,QAAL,CAAc;oBACEF;KADhB;;GAHoB,CAAtB;;;MAUIF,iBAAiBA,cAAcK,IAAnC,EAAyC;IACvC,UAACF,GAAD,EAAO;kBACOE,IAAd,CAAmB,qBAAa;SAC3BF,QAAQ,OAAKF,KAAL,CAAWE,GAAvB,EAA4B;aACtBC,QAAL,CAAc;sBACEF;OADhB;;KAFF;IADD,EAQG,KAAKD,KAAL,CAAWE,GARd;;;;sBAWFG,iDAAmB;OACbP,aAAL;;;sBAEDQ,+DAA0BC,WAAU;;;MAC/B,KAAKP,KAAL,CAAWE,GAAX,IAAkB,KAAKF,KAAL,CAAWE,GAAX,KAAmBK,UAAUL,GAAnD,EAAwD;QAClDC,QAAL,CAAc;mBACE;IADhB,EAEG,YAAI;WACDL,aAAL;IAHD;;;;sBAOFU,2BAAQ;;MAEH,KAAKX,KAAL,CAAWE,aAAf,EAA8B;UACtBU,SAAE,KAAKZ,KAAL,CAAWE,aAAb,EAA4B,KAAKC,KAAjC,CAAP;GADD,MAEO,IAAI,KAAKA,KAAL,CAAWU,OAAf,EAAwB;OACxBC,mBAAmB,KAAKX,KAAL,CAAWU,OAAX,EAAzB;UACOC,gBAAP;;SAEM,IAAP;;;;EAlDuBC,kBAsDzB;;;;"}