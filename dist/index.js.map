{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { h, Component } from 'preact';\n\nclass AsyncRoute extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tcomponentData: null\n\t\t};\n\t}\n\tloadComponent(){\n\t\tconst componentData = this.props.component(this.props.url, ({component}) => {\n            // Named param for making callback future proof\n\t\t\tif (component) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcomponentData: component\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// In case returned value was a promise\n\t\tif (componentData && componentData.then) {\n\t\t\tcomponentData.then(component => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tcomponentData: component\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tcomponentDidMount(){\n\t\tthis.loadComponent();\n\t}\n\tcomponentWillReceiveProps(nextProps){\n\t\tif (this.props.url && this.props.url !== nextProps.url) {\n\t\t\tthis.setState({\n\t\t\t\tcomponentData: null\n\t\t\t}, ()=>{\n\t\t\t\tthis.loadComponent();\n\t\t\t});\n\t\t}\n\t}\n\trender(){\n\n\t\tif (this.state.componentData) {\n\t\t\treturn h(this.state.componentData, { url: this.props.url, matches: this.props.matches });\n\t\t} else if (this.props.loading) {\n\t\t\tconst loadingComponent = this.props.loading();\n\t\t\treturn loadingComponent;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nexport default AsyncRoute;"],"names":["AsyncRoute","state","loadComponent","componentData","props","component","url","setState","then","componentDidMount","componentWillReceiveProps","nextProps","render","h","matches","loading","loadingComponent","Component"],"mappings":";;;;;;;;;;;;AAAA,IAEMA;;;uBACS;;;+CACb,qBADa;;QAERC,KAAL,GAAa;kBACG;GADhB;;;;sBAIDC,yCAAe;;;MACRC,gBAAgB,KAAKC,KAAL,CAAWC,SAAX,CAAqB,KAAKD,KAAL,CAAWE,GAAhC,EAAqC,gBAAiB;OAAfD,SAAe,QAAfA,SAAe;;;OAEvEA,SAAJ,EAAe;WACTE,QAAL,CAAc;oBACEF;KADhB;;GAHoB,CAAtB;;;MAUIF,iBAAiBA,cAAcK,IAAnC,EAAyC;iBAC1BA,IAAd,CAAmB,qBAAa;WAC1BD,QAAL,CAAc;oBACEF;KADhB;IADD;;;;sBAOFI,iDAAmB;OACbP,aAAL;;;sBAEDQ,+DAA0BC,WAAU;;;MAC/B,KAAKP,KAAL,CAAWE,GAAX,IAAkB,KAAKF,KAAL,CAAWE,GAAX,KAAmBK,UAAUL,GAAnD,EAAwD;QAClDC,QAAL,CAAc;mBACE;IADhB,EAEG,YAAI;WACDL,aAAL;IAHD;;;;sBAOFU,2BAAQ;;MAEH,KAAKX,KAAL,CAAWE,aAAf,EAA8B;UACtBU,SAAE,KAAKZ,KAAL,CAAWE,aAAb,EAA4B,EAAEG,KAAK,KAAKF,KAAL,CAAWE,GAAlB,EAAuBQ,SAAS,KAAKV,KAAL,CAAWU,OAA3C,EAA5B,CAAP;GADD,MAEO,IAAI,KAAKV,KAAL,CAAWW,OAAf,EAAwB;OACxBC,mBAAmB,KAAKZ,KAAL,CAAWW,OAAX,EAAzB;UACOC,gBAAP;;;SAGM,IAAP;;;;EA/CuBC,kBAmDzB;;;;"}